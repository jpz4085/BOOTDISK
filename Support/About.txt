				*************************************
				BOOTDISK: Flash Drive Formatting Tool
				*************************************
				
Main Menu
=========

FreeDOS 1.4   Create a boot disk containing a basic set of utilities like FDISK,FORMAT,SYS,EDIT,etc.

MS-DOS 8.0    Create a boot disk using the MS-DOS version included with Windows from XP to 8.1.
              This option is not present by default and must be enabled from the Tools sub-menu.

Windows 7-11  Create Windows install media and optionally extract an ISO image to the disk.
              Windows to Go media is supported when the proper dependencies are installed.

Linux/Other   Create bootable live Linux media (including persistence with supported distributions)
              as well as other install media and pre-built UEFI Shell images provided by Pete Batard.
              The script can write raw disk images using dd or partition and format the disk.

Tools Menu
==========

Extract MS-DOS 8.0:

Extract and install the system files from the diskcopy.dll library. The script can download it from
Microsoft or you can provide a path to it. This file can be found under the Windows\SysWOW64 folder
on a working system or the same location in the sources\install.wim archive on the install media.

Download an ISO file:

Download official retail Windows ISOs and UEFI Shell ISOs using the same PowerShell script employed
by Rufus. Fido can prompt for each parameter or all arguments can be passed on a single command line.
Files are saved to the active user's Downloads folder.

Verify Windows ISO checksum:

Calculate the SHA-1 value for a Windows DVD image and search for it in the sha1.rg-adguard.net databases.
A match confirms you have an original and unmodified Microsoft ISO file.
 
Custom Windows installation:

Automatically create a local account, configure privacy/data collection settings, use the current language
and timezone settings, skip wireless network setup, and disable automatic BitLocker encryption. Disable the
mandatory Microsoft account screen and bypass hardware requirements (TPM/Secure Boot/RAM) for Windows 11.

Linux Persistence
=================

Specify the size of the persistence partition with a suffix of M/G/T (ex. 2048M) or as just 'max' to use
all remaining space on the media. Enter nothing or a size of zero (ex. 0M) to disable persistence.

The script will also offer to create a data/storage partition from any remaining space if desired.

The steps below are required to enable persistence on certain Linux distributions when creating the live
media from macOS. The necessary file or folders must be created from the live environment the first time.

Debian:  Open a terminal and enter "lsblk -f" to identify the mount point of the persistence partition.
         Change to the mount folder and enter the command below to create the required config file.
         
         echo "/ union" | sudo tee persistence.conf (This will make all changes persistent.)
        
Overlay: Disregard the missing persistent overlay error which occurs during the first boot process.
         Open a terminal and enter "lsblk -f" to identify the mount point of the persistence image file.
         Change to the mount folder and enter the command below to create the required overlay folders.
         Note that the "--context" option is only required for Fedora.
         
         sudo mkdir -m 0755 --context=system_u:object_r:root_t:s0 overlayfs ovlwork
        
Reboot and confirm that persistence is working as expected.

Troubleshooting
===============

1. File and folder paths:

When entering file and folder paths at the prompts they should not contain any quotes so just paste
the file, folder or path into terminal but don't drag and drop. This will avoid invalid path errors.

2. Windows ISO downloads:

When using the Fido download script you may receive a error stating "Some users, entities and locations
are banned from using this service" if you or a previous user with the same external IP address accessed
the Microsoft servers in rapid succession. The solution is to wait at least a full 24 hours before making
another attempt then use the Fido command line option (not interactive mode) to download the ISO.

3. Windows to Go process:

When creating Windows to Go media under Linux the terminal may suddenly be killed by the userspace out
of memory killer (systemd-oomd) as indicated in the logs. This happens most frequently under the GNOME
desktop environment. See the repository Notes file or Linux documentation about overriding the default
Memory Pressure Limit and Memory Pressure Duration values with drop-in configuration files.

Dependencies
============

Packages required for default features.
Windows Install and UEFI Shell media:
7zip, curl, jq, bash (above 3.2 on macOS)

Packages for recommended features.
Windows/UEFI Shell ISO downloads: powershell
Linux NTFS and exFAT Support:     ntfs-3g, exfatprogs
Graphical Dialogue Support:       zenity (Linux)
Imaging Progress Support:         pv/pipeviewer

Packages for optional features.
Legacy BIOS Support and DOS media: ms-sys,mtools
Support for Windows To Go media:   wimtools,bcd-sys
macOS NTFS Write/Format Support:   Tuxera/Paragon
macOS Linux Persistence Support:   e2fsprogs

